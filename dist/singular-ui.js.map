{"version":3,"sources":["singular-ui.js"],"names":["singular","ORIGIN_LENGTH","location","origin","length","ACTIVATED_LINKS","activeLink","selector","load","activeLinks","unload","inactiveLinks","containers","Array","from","document","querySelectorAll","current","anchors","classList","remove","container","currentPath","href","substring","getElementsByTagName","anchor","activate","focus","blur","ul","closest","li","add","window"],"mappings":"AAAA,a,CACA;;AACA,CAAC,UAAUA,QAAV,EAAoB;AACjB,MAAMC,aAAa,GAAGC,QAAQ,CAACC,MAAT,CAAgBC,MAAtC;AACA,MAAIC,eAAe,GAAG,EAAtB;;AACAL,EAAAA,QAAQ,CAACM,UAAT,GAAsB,UAAUC,QAAV,EAAoB;AACtC,WAAOP,QAAQ,CACVQ,IADE,CACG,YAAM;AACZC,MAAAA,WAAW,CAACF,QAAD,CAAX;AACH,KAHM,EAIFG,MAJE,CAIKC,aAJL,CAAP;AAKH,GAND;;AAOA,WAASF,WAAT,CAAqBF,QAArB,EAA+B;AAC3B,QAAMK,UAAU,GAAGC,KAAK,CAACC,IAAN,CAAWC,QAAQ,CAACC,gBAAT,CAA0BT,QAA1B,CAAX,CAAnB;AACA,QAAIU,OAAO,GAAGL,UAAU,CAACR,MAAzB;;AACA,WAAOa,OAAO,KAAK,CAAnB,EAAsB;AAClBX,MAAAA,UAAU,CAACM,UAAU,CAACK,OAAD,CAAX,CAAV;AACH;AACJ;;AACD,WAASN,aAAT,GAAyB;AACrB,QAAMO,OAAO,GAAGb,eAAhB;AACA,QAAIY,OAAO,GAAGC,OAAO,CAACd,MAAtB;;AACA,WAAOa,OAAO,KAAK,CAAnB,EAAsB;AAClBC,MAAAA,OAAO,CAACD,OAAD,CAAP,CAAiBE,SAAjB,CAA2BC,MAA3B,CAAkC,SAAlC;AACH;;AACDf,IAAAA,eAAe,GAAG,EAAlB;AACH;;AACD,WAASC,UAAT,CAAoBe,SAApB,EAA+B;AAC3B,QAAMC,WAAW,GAAGpB,QAAQ,CAACqB,IAAT,CAAcC,SAAd,CAAwBvB,aAAxB,CAApB;AACA,QAAMiB,OAAO,GAAGG,SAAS,CAACI,oBAAV,CAA+B,GAA/B,CAAhB;AACA,QAAIR,OAAO,GAAGC,OAAO,CAACd,MAAtB;;AACA,WAAOa,OAAO,KAAK,CAAnB,EAAsB;AAClB,UAAIS,MAAM,GAAGR,OAAO,CAACD,OAAD,CAApB;;AACA,UAAIK,WAAW,KAAKI,MAAM,CAACH,IAAP,CAAYC,SAAZ,CAAsBvB,aAAtB,CAApB,EAA0D;AACtD;AACH;;AACD0B,MAAAA,QAAQ,CAACD,MAAD,CAAR;AACAA,MAAAA,MAAM,CAACE,KAAP;AACAF,MAAAA,MAAM,CAACG,IAAP;;AACA,SAAG;AACC,YAAIC,EAAE,GAAGJ,MAAM,CAACK,OAAP,CAAe,IAAf,CAAT;;AACA,YAAID,EAAJ,EAAQ;AACJ,cAAME,EAAE,GAAGF,EAAE,CAACC,OAAH,CAAW,IAAX,CAAX;;AACA,cAAIC,EAAJ,EAAQ;AACJN,YAAAA,MAAM,GAAGM,EAAE,CAACP,oBAAH,CAAwB,GAAxB,EAA6B,CAA7B,CAAT;;AACA,gBAAIC,MAAJ,EAAY;AACRC,cAAAA,QAAQ,CAACD,MAAD,CAAR;AACA;AACH;AACJ;AACJ;;AACD;AACH,OAbD,QAaSA,MAbT;AAcH;AACJ;;AACD,WAASC,QAAT,CAAkBD,MAAlB,EAA0B;AACtBrB,IAAAA,eAAe,CAACA,eAAe,CAACD,MAAjB,CAAf,GAA0CsB,MAA1C;AACAA,IAAAA,MAAM,CAACP,SAAP,CAAiBc,GAAjB,CAAqB,SAArB;AACH;AACJ,CAzDD,EAyDGC,MAAM,CAAC,UAAD,CAzDT","sourcesContent":["\"use strict\";\n/// <reference path=\"singular.ts\" />\n(function (singular) {\n    const ORIGIN_LENGTH = location.origin.length;\n    let ACTIVATED_LINKS = [];\n    singular.activeLink = function (selector) {\n        return singular\n            .load(() => {\n            activeLinks(selector);\n        })\n            .unload(inactiveLinks);\n    };\n    function activeLinks(selector) {\n        const containers = Array.from(document.querySelectorAll(selector));\n        let current = containers.length;\n        while (current-- > 0) {\n            activeLink(containers[current]);\n        }\n    }\n    function inactiveLinks() {\n        const anchors = ACTIVATED_LINKS;\n        let current = anchors.length;\n        while (current-- > 0) {\n            anchors[current].classList.remove('_active');\n        }\n        ACTIVATED_LINKS = [];\n    }\n    function activeLink(container) {\n        const currentPath = location.href.substring(ORIGIN_LENGTH);\n        const anchors = container.getElementsByTagName('A');\n        let current = anchors.length;\n        while (current-- > 0) {\n            let anchor = anchors[current];\n            if (currentPath !== anchor.href.substring(ORIGIN_LENGTH)) {\n                continue;\n            }\n            activate(anchor);\n            anchor.focus();\n            anchor.blur();\n            do {\n                let ul = anchor.closest('ul');\n                if (ul) {\n                    const li = ul.closest('li');\n                    if (li) {\n                        anchor = li.getElementsByTagName('A')[0];\n                        if (anchor) {\n                            activate(anchor);\n                            continue;\n                        }\n                    }\n                }\n                break;\n            } while (anchor);\n        }\n    }\n    function activate(anchor) {\n        ACTIVATED_LINKS[ACTIVATED_LINKS.length] = anchor;\n        anchor.classList.add('_active');\n    }\n})(window['singular']);\n"],"file":"singular-ui.js"}