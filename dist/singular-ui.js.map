{"version":3,"sources":["singular-ui.js"],"names":["singular","ORIGIN_LENGTH","location","origin","length","ACTIVATED_LINKS","inactiveLinks","anchors","current","remove","anchor","li","classList","add","activeLink","selector","containers","from","document","querySelectorAll","container","currentPath","href","substring","getElementsByTagName","activate","focus","closest","ul","activeLinks","unload","window"],"mappings":"cAEA,SAAWA,GACP,IAAMC,EAAgBC,SAASC,OAAOC,OAClCC,EAAJ,GAcC,SAAAC,IAESC,IAAN,IAAMA,EAAUF,EADXC,EAAAA,EAAgBF,OACLC,EAAHG,KACTA,EAAUD,GAAQH,UAAtBK,OAAA,WACAJ,EAAsB,GAsBNK,SAAAA,EAASC,IAYzBN,EAAgBA,EAAgBD,QAAUM,GAX1BE,UAAYC,IAAA,WAxChCb,EAASc,WAAa,SAAUC,GAAhCf,OAASc,EACEd,KAAAA,YAMX,SAAqBe,GACXC,IAAAA,EAAmBC,MAAKC,KAAAA,SAASC,iBAAiBJ,IACpDP,EAAUQ,EAAWZ,OACzB,KAAmB,EAAZI,MASN,SAAAY,GAID,IAAMC,EAAcnB,SAASoB,KAAKC,UAAUtB,GAH5CI,EAAAe,EAAAI,qBAAA,KACHhB,EAAAD,EAAAH,OAKG,KAAmB,EAAZI,KAAe,CAJjBM,IAAAA,EAAWM,EAAWZ,GACrBa,GAAAA,IAAuBC,EAAKC,KAAAA,UAAUtB,GAAtCoB,CAQFI,EAASf,GALNF,EAAOkB,QACNhB,EAASH,OAOb,EAAG,CANCc,IAAAA,EAAWX,EAAWiB,QAAMJ,MAC5B,GAAAK,EAAA,CACHjB,EAAAiB,EAAAD,QAAA,MAQO,GAAIhB,IAPZD,EAAAC,EAAAa,qBAAA,KAAA,IACA,CACAC,EAAAf,GASgB,UANJ,YACSA,KA3BlBF,CAAYQ,EAAGR,IAPlBqB,CAAYd,KAHpBe,OAAAxB,IAHJ,CA6C4ByB,OAAA","file":"singular-ui.js","sourcesContent":["\"use strict\";\n/// <reference path=\"singular.ts\" />\n(function (singular) {\n    const ORIGIN_LENGTH = location.origin.length;\n    let ACTIVATED_LINKS = [];\n    singular.activeLink = function (selector) {\n        return singular\n            .load(() => {\n            activeLinks(selector);\n        })\n            .unload(inactiveLinks);\n    };\n    function activeLinks(selector) {\n        const containers = Array.from(document.querySelectorAll(selector));\n        let current = containers.length;\n        while (current-- > 0) {\n            activeLink(containers[current]);\n        }\n    }\n    function inactiveLinks() {\n        const anchors = ACTIVATED_LINKS;\n        let current = anchors.length;\n        while (current-- > 0) {\n            anchors[current].classList.remove('_active');\n        }\n        ACTIVATED_LINKS = [];\n    }\n    function activeLink(container) {\n        const currentPath = location.href.substring(ORIGIN_LENGTH);\n        const anchors = container.getElementsByTagName('A');\n        let current = anchors.length;\n        while (current-- > 0) {\n            let anchor = anchors[current];\n            if (currentPath !== anchor.href.substring(ORIGIN_LENGTH)) {\n                continue;\n            }\n            activate(anchor);\n            anchor.focus();\n            anchor.blur();\n            do {\n                let ul = anchor.closest('ul');\n                if (ul) {\n                    const li = ul.closest('li');\n                    if (li) {\n                        anchor = li.getElementsByTagName('A')[0];\n                        if (anchor) {\n                            activate(anchor);\n                            continue;\n                        }\n                    }\n                }\n                break;\n            } while (anchor);\n        }\n    }\n    function activate(anchor) {\n        ACTIVATED_LINKS[ACTIVATED_LINKS.length] = anchor;\n        anchor.classList.add('_active');\n    }\n})(window['singular']);\n"]}