{"version":3,"sources":["singular-store.js"],"names":["singular","FROM_CHAR_CODE","String","fromCharCode","PARSE","JSON","parse","STRINGIFY","stringify","toBinary","value","units","Uint16Array","length","current","charCodeAt","codes","Uint8Array","buffer","end","result","fromBinary","bytes","reverse","getKey","btoa","setSession","name","sessionStorage","setItem","getSession","getItem","atob","popSession","removeItem","clearSession","clear","session","get","set","pop","window"],"mappings":"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","sourcesContent":["\"use strict\";\n/// <reference path=\"singular.ts\" />\n(function (singular) {\n    const { fromCharCode: FROM_CHAR_CODE } = String;\n    const { parse: PARSE, stringify: STRINGIFY } = JSON;\n    function toBinary(value) {\n        const units = new Uint16Array(value.length);\n        let current = units.length;\n        while (current-- > 0) {\n            units[current] = value.charCodeAt(current);\n        }\n        const codes = new Uint8Array(units.buffer);\n        const end = codes.length;\n        let result = '';\n        current = -1;\n        while (++current < end) {\n            result += FROM_CHAR_CODE(codes[current]);\n        }\n        return result;\n    }\n    function fromBinary(value) {\n        const bytes = new Uint8Array(value.length);\n        let current = bytes.length;\n        while (current-- > 0) {\n            bytes[current] = value.charCodeAt(current);\n        }\n        const codes = new Uint16Array(bytes.buffer);\n        const end = codes.length;\n        let result = '';\n        current = -1;\n        while (++current < end) {\n            result += FROM_CHAR_CODE(codes[current]);\n        }\n        return result;\n    }\n    function reverse(value) {\n        let result = '';\n        let current = value.length;\n        while (current-- > 0) {\n            result += value[current];\n        }\n        return result;\n    }\n    function getKey(value) {\n        return btoa(reverse(btoa(value)));\n    }\n    function setSession(name, value) {\n        sessionStorage.setItem(getKey(name), btoa(reverse(btoa(toBinary(STRINGIFY(value))))));\n        return singular;\n    }\n    function getSession(name) {\n        const value = sessionStorage.getItem(getKey(name));\n        return value ?\n            PARSE(fromBinary(atob(reverse(atob(value))))) :\n            value;\n    }\n    function popSession(name) {\n        sessionStorage.removeItem(getKey(name));\n        return singular;\n    }\n    function clearSession() {\n        sessionStorage.clear();\n        return singular;\n    }\n    singular.session = {\n        get: getSession,\n        set: setSession,\n        pop: popSession,\n        clear: clearSession\n    };\n})(window['singular']);\n"],"file":"singular-store.js"}