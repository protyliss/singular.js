"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dash=function(m,L,o){var e,O,E,x,b,S,t=location,r=t.href,a=t.origin,i=Array.from,s=[],c=[],_=[],H={development:!1,htmlSelectors:null,classSelectors:null,enableKeepHtml:!1,enableKeepStyles:!1,enableSearchString:!1,enableHashString:!1},M=(e=L.createDocumentFragment(),t=L.createElement("html"),e.appendChild(t),t),l=[],u=[],N={},j={},A=!1,C=r,w=_createClass(function e(){_classCallCheck(this,e),_defineProperty(this,"title",void 0),_defineProperty(this,"styles",void 0),_defineProperty(this,"scripts",void 0),_defineProperty(this,"enterCallbacks",[]),_defineProperty(this,"exitCallbacks",[]),_defineProperty(this,"classes",void 0),_defineProperty(this,"html",void 0)}),n=_createClass(function e(t){_classCallCheck(this,e),_defineProperty(this,"dash",void 0),this.dash={href:t}}),T=_defineProperty({},r,new w);function I(e){return I.enter(e)}function P(e,t){for(var r=q(O),n=D(O),l=[],o=[],a=r.length;0<a--;){var i=r[a],s=B(i,"href");l[l.length]=s,N[s]=i}for(a=n.length;0<a--;){var c=n[a],u=B(c,"src");o[o.length]=u,j[c.src]=c}var f=T[C];f.title=L.title,f.styles=l,f.scripts=o,f.html=b,b=null;for(var h=L.links,a=h.length;0<a--;){var d=h[a],p=d.getAttribute("href");p&&(p.startsWith("./")||p.startsWith("../"))&&d.setAttribute("href",d.href)}return(P=function(t,r){if(A){var e=T[C].exitCallbacks.concat(_),n=e.length,l=-1;try{for(;++l<n;)e[l]()}catch(e){console.warn(e)}}else S&&S.abort();r=r||H.htmlSelectors,m.scrollTo(0,0),L.title=t.substring(t.indexOf(":")+3),A=!1,C=k(t);var o=T[C];o?H.enableKeepHtml?W(o):y(t).then(function(e){o.html=e,W(o)}):y(t).then(function(e){!function(e,t,r){r=function(e,t,r){M.innerHTML=e;var n,l=(M.getElementsByTagName("TITLE")[0]||{}).innerText||t,o=H.classSelectors,a=null;if(o)for(a={},n=o.length;0<n--;){var i=o[n];a[i]=(M.getElementsByTagName(i)[0]||{}).className||""}var s,c=q(M),u=D(M),e=function(e){var t=[],r=e.length;for(;0<r--;)t[t.length]=B(e[r],"href");return t}(c),t=function(e){var t=[],r=e.length;for(;0<r--;)t[t.length]=B(e[r],"src");return t}(u);n=u.length;for(;0<n--;){var f=u[n];null!=f&&f.parentNode&&f.parentNode.removeChild(f)}if(r){for(var h=[],d=r.length;0<d--;){var p=M.querySelector("#"+r[d]);p&&(h[h.length]=p.outerHTML)}s=h.join("")}else s=M.outerHTML;c=new w;return c.title=l,c.title=l,c.styles=e,c.scripts=t,c.classes=a,c.html=s,c}(t,e,r);W(T[C]=r)}(t,e,r)})}).apply(this,arguments);function y(e){return S=new AbortController,fetch(e,{signal:S.signal}).then(g).catch(v)}function g(e){return e.text()}function v(e){console.warn(e),e instanceof DOMException||console.warn(e)}}function k(e){var t,r;return H.enableHashString||-1<(r=e.indexOf("#"))&&(e=e.substring(0,r)),H.enableSearchString||(t=e.indexOf("?"),r=e.indexOf("#"),-1<t&&(e=e.substring(0,t)+(-1<r?e.substring(r):""))),e}function W(e){var t=e.title,r=e.styles,n=e.scripts,l=e.classes,e=e.html;t&&(L.title=t);var o=H.htmlSelectors,a=H.classSelectors;if(a&&l)for(var i=a.length;0<i--;){var s=a[i],c=O.querySelector(s);c&&(c.className=l[s])}if(M.innerHTML=e,o)for(var u=o.length;0<u--;){var f=o[u],h=M.querySelector("#"+f),f=x.querySelector("#"+f);h&&f&&f.parentNode.replaceChild(h,f)}else x.innerHTML="",x.append.apply(x,_toConsumableArray((M.getElementsByTagName("BODY")[0]||M).children));M.innerHTML="";var d,p=I.addScript,y=I.addStyle,g=[],v=[Promise.resolve()],m=[];if(!H.enableKeepStyles)for(var b=Object.keys(N),S=b.length;0<S--;){var _=b[S];-1<r.indexOf(_)||(m[m.length]=N[_],delete N[_])}for(d=r.length,S=-1;++S<d;){var A,C,w=r[S];N[w]||(A=(C=y(w)).link,C=C.promise,N[w]=A,v[v.length]=C,g[g.length]=A)}for(d=n.length,S=-1;++S<d;){var T,P,k=n[S];j[k]||(T=(P=p(k)).script,P=P.promise,j[k]=T,v[v.length]=P,g[g.length]=T)}g.length&&E.append.apply(E,g),Promise.all(v).then(function(){for(var e=m.length;0<e--;){var t=m[e];t.parentNode.removeChild(t)}K()})}function q(e){for(var t=[],r=i(e.querySelectorAll("link[rel=stylesheet]")),n=r.length,l=-1;++l<n;){var o=r[l];o.getAttribute("href")&&o.href.startsWith(a)&&(t[t.length]=o)}return t}function D(e){for(var t=[],r=e.querySelectorAll("script[src]"),n=r.length,l=-1;++l<n;){var o=r[l];o.getAttribute("src")&&o.src.startsWith(a)&&(t[t.length]=o)}return t}function B(e,t){return""+new URL(e.getAttribute(t),C)}function K(){for(var e=l.length,t=-1,r=Promise.resolve();++t<e;)!function(){var e=l[t];r=r.then(function(){return e()})}();for(var n=[r],t=u.length;0<t--;)n[n.length]=u[t]();l=[],u=[],Promise.all(n).then(f).catch(h)}function f(){O.style.visibility="inherit";try{!function(){var e=0<arguments.length&&arguments[0]!==o?arguments[0]:x;A=!0;var t=T[C],r=s.concat(c,t.enterCallbacks),n=r.length,l=-1;for(;++l<n;)r[l](e)}()}catch(e){console.warn(e)}}function h(e){console.warn(e),H.development||location.reload()}return I.configure=function(e){e.htmlSelectors&&("string"==typeof e.htmlSelectors&&(e.htmlSelectors=[e.htmlSelectors]),-1<e.htmlSelectors.indexOf("body")&&(e.htmlSelectors=null)),e.classSelectors&&"string"==typeof e.classSelectors&&(e.classSelectors=[e.classSelectors]);for(var t=Object.keys(e),r=t.length;0<r--;){var n=t[r];H[n]=e[n]}return I},I.series=function(e){return l[l.length]=e,I},I.parallel=function(e){return u[u.length]=e,I},I.addStyle=function(r){var n=L.createElement("link");return{link:n,promise:new Promise(function(e){function t(){return e()}n.onload=t,n.onerror=t,n.rel="stylesheet",E.append(n),n.href=r})}},I.addScript=function(r){var n=!(1<arguments.length&&arguments[1]!==o)||arguments[1],l=L.createElement("script");return{script:l,promise:new Promise(function(e){function t(){return e()}l.onload=t,l.onerror=t,l.async=n,E.append(l),l.src=r})}},I.ready=function(e){return s[s.length]=e,A&&e(x),I},I.load=function(e){return c[c.length]=e,A&&e(x),I},I.unload=function(e){return _[_.length]=e,I},I.enter=function(e){var t=T[C].enterCallbacks;return t[t.length]=e,A&&e(x),I},I.exit=function(e){var t=T[C].exitCallbacks;return t[t.length]=e,I},I.route=function(t,e){try{P(t,e)}catch(e){return console.warn(e),H.development||location.replace(t),null}history.pushState(new n(t),t,t)},I.changed=function(){for(var e=0<arguments.length&&arguments[0]!==o?arguments[0]:x,t=c.length,r=-1;++r<t;)c[r](e);return I},addEventListener("click",function(e){var t=e.target,r=t.tagName;if("BODY"===r)return!1;if("A"!==r){if(!1===(null===t||void 0===t?void 0:t._dashAnchor))return!0;var n=t.closest("a");if(!n||!n.href)return!(t._dashAnchor=!1);t=n}r=t.href,n=t.getAttribute("href");if(!r.startsWith(a)||t.download||n&&n.startsWith("#"))return!(t._dashAnchor=!1);var l=null===(t._dashAnchor=t)||void 0===t||null===(l=t.dataset)||void 0===l?void 0:l.outlet;return I.route(t.href,l?l.split(","):o),e.stopPropagation(),e.preventDefault(),!1}),addEventListener("popstate",function(e){e=e.state;return e&&e.dash&&P(e.dash.href),!0}),addEventListener("DOMContentLoaded",function(){O=L.documentElement,E=L.head,x=L.body,b=O.outerHTML,(C=k(r))!==r&&(T[C]=T[r],delete T[r]),O.style.visibility="hidden",K()}),I}(window,document);
//# sourceMappingURL=dash.js.map
