document.documentElement.style.visibility="hidden";const{href:f,origin:q}=location,{isArray:F,from:X}=Array,{keys:Z}=Object,ee=!document.currentScript;let T={development:!1,outletSelectors:null,classSelectors:null,enableKeepHtml:!1,enableKeepStyles:!1,enableSearchString:!1,enableHashString:!1,disableTitleChange:!1},R={},K={},A=!1,L=f,w=f,v;class I{constructor(e,t,r=[],a=[],c=void 0,p=""){this.url=e;this.title=t;this.styles=r;this.scripts=a;this.classes=c;this.html=p}}class o{static seriesCallbacks=[];static parallelCallbacks=[];static readyCallbacks=[];static loadCallbacks=[];static unloadCallbacks=[];enterCallbacks=[];exitCallbacks=[]}class te{singular;constructor(e){this.singular={href:e}}}class P extends Array{constructor(e){super(0),this.push.apply(this,F(e)?e:[e])}#e(e,t){const r=[],a=this.length;let c=-1;for(;++c<a;){const p=this[c].querySelectorAll(t),m=p.length;let i=-1;for(;++i<m;){const u=p[i];r.indexOf(u)===-1&&(r[r.length]=u)}}return r}getElementById(e){return document.getElementById(e)}getElementsByTagName(e){return this.#e("getElementsByTagName",e)}getElementsByClassName(e){return this.#e("getElementsByClassName",e)}querySelector(e){const t=this.length;let r=-1;for(;++r<t;){const a=this[r].querySelector(e);if(a)return a}return null}querySelectorAll(e){return this.#e("querySelectorAll",e)}}const M={[f]:new I(f,document.title)},S={[f]:new o};export const chaining={configure,series,parallel,ready,load,enter,exit,unload,changed};export function configure(n){let{classSelectors:e}=n;if(e){F(e)||(e=[e]);let t=e.length;const r=[];for(;t-- >0;)r.push(...e[t].split(","));n.classSelectors=r}return T=Object.assign(T,n),chaining}export function addStyle(n){const e=O("link");return{link:e,promise:new Promise(t=>{const r=()=>t();e.onload=r,e.onerror=r,e.rel="stylesheet",document.head.append(e),e.href=n})}}export function addScript(n,e=!0){const t=O("script");return{script:t,promise:new Promise(r=>{const a=()=>r();ee&&(t.type="module"),t.onload=a,t.onerror=a,t.async=e,document.head.append(t),t.src=n})}}export function parallel(n){return o.parallelCallbacks[o.parallelCallbacks.length]=n,chaining}export function series(n){return o.seriesCallbacks[o.seriesCallbacks.length]=n,chaining}export function ready(n){return o.readyCallbacks[o.readyCallbacks.length]=n,A&&n(new P([document.body])),chaining}export function load(n){return o.loadCallbacks[o.loadCallbacks.length]=n,A&&n(new P([document.body])),chaining}export function enter(n){const{enterCallbacks:e}=S[w];return e[e.length]=n,A&&n(new P([document.body])),chaining}export function exit(n){const{exitCallbacks:e}=S[w];return e[e.length]=n,chaining}export function unload(n){return o.unloadCallbacks[o.unloadCallbacks.length]=n,chaining}export function route(n,e){try{U(n,e)}catch(t){return console.warn(t),T.development||location.replace(n),null}}export function changed(n=[document.body]){const e=new P(n),t=o.loadCallbacks.length;let r=-1;for(;++r<t;)o.loadCallbacks[r](e);return chaining}function O(n){return document.createElement(n)}function V(n){const e=document.createDocumentFragment(),t=O("html");return e.appendChild(t),t.innerHTML=n,t}function U(n,e=void 0,t=!0){const{entries:r,urls:a}=$(document.documentElement),{entries:c,urls:p}=j(document.documentElement);let m=r.length,i=-1;for(;++i>m;){const[l,s]=r[i];R[s]=l}for(m=c.length,i=-1;++i<m;){const[l,s]=c[i];K[s]=l,document.head.append(l)}const u=M[L];u.url=f,u.title=document.title,u.styles=a,u.scripts=p,u.classes=W(document);const{links:b}=document;for(i=b.length;i-- >0;){const l=b[i],s=l.getAttribute("href");!s||!(s.startsWith("./")||s.startsWith("../"))||l.setAttribute("href",l.href)}return(U=d).apply(this,arguments);function d(l,s=void 0,g=!0){if(A){const N=S[w].exitCallbacks.concat(o.unloadCallbacks),J=N.length;let D=-1;try{for(;++D<J;)N[D]()}catch(Q){console.warn(Q)}}else v&&v.abort();window.scrollTo(0,0),A=!1,L=G(l),w=_(l);const h=M[L];return h?T.enableKeepHtml?(g&&k(C(h.url,l)),B(h)):E(l).then(([x,N])=>(h.html=N,g&&k(x),B(h))):E(l).then(([x,N])=>(g&&k(x),ne(l,x,N)))}function E(l){return v=new AbortController,fetch(l,{signal:v.signal}).then(y).catch(H)}function y(l){const{url:s}=l;return Promise.all([Promise.resolve(s),l.text()])}function H(l){console.warn(l)}function k(l){history.pushState(new te(l),l,l)}function C(l,s){const g=new URL(l),h=new URL(s);return g.search=h.search,g.hash=h.hash,""+h}}function W(n){const{classSelectors:e}=T;if(e){const t={};let r=e.length;for(;r-- >0;){const a=e[r];t[a]=(n.querySelector(a)||{}).className||""}return t}}function ne(n,e,t){const r=V(t),a=(r.getElementsByTagName("TITLE")[0]||{}).innerText||n,{urls:c}=$(r),{entries:p,urls:m}=j(r);let i=p.length;for(;i-- >0;){const[y]=p[i];y?.parentNode&&y.parentNode.removeChild(y)}let u=r.outerHTML;const b=new I(e,a,c,m,W(r),u),d=new URL(L);d.pathname.endsWith("/")&&(d.pathname=d.pathname.substring(0,d.pathname.length-1)),M[""+d]=b;const E=_(""+d);return S[E]||(S[E]=new o),B(b)}function G(n){const e=new URL(n);T.enableHashString||(e.hash=""),T.enableSearchString||(e.search="");let{pathname:t}=e;return t.endsWith("/")&&(e.pathname=t.substring(0,t.length-1)),""+e}function _(n){const e=new URL(n);e.hash="",e.search="";let{pathname:t}=e;return t.endsWith("/")&&(e.pathname=t.substring(0,t.length-1)),""+e}function B(n){const{url:e,title:t,styles:r,scripts:a,classes:c,html:p}=n,{outletSelectors:m,classSelectors:i}=T;if(T.disableTitleChange||(document.title=t||e.substring(e.indexOf("://")+3)),i&&c){let l=i.length;for(;l-- >0;){const s=i[l],g=document.documentElement.querySelector(s);g&&(g.className=c[s])}}const u=V(p);let b=!1,d;if(m){const l=document.querySelectorAll(m);if(d=Array.from(u.querySelectorAll(m)),d.length===l.length){let s=d.length;for(;s-- >0;){const g=d[s],h=l[s];if(g.tagName!==h.tagName){b=!0;break}}if(!b)for(s=d.length;s-- >0;){const g=d[s],h=l[s];h.parentNode.replaceChild(g,h)}}else b=!0}else b=!0;b&&(document.body.innerHTML=(u.getElementsByTagName("BODY")[0]||u).innerHTML,d=[document.body]),u.innerHTML="";const E=[],y=[Promise.resolve()],H=[];let k,C;if(!T.enableKeepStyles){const l=Z(R);for(C=l.length;C-- >0;){let s=l[C];r.indexOf(s)>-1||(H[H.length]=R[s],delete R[s])}}for(k=r.length,C=-1;++C<k;){const l=r[C];if(R[l])continue;const{link:s,promise:g}=addStyle(l);R[l]=s,y[y.length]=g,E[E.length]=s}for(k=a.length,C=-1;++C<k;){const l=a[C];if(K[l]?.parentNode)continue;const{script:s,promise:g}=addScript(l);K[l]=s,y[y.length]=g,E[E.length]=s}return E.length&&document.head.append(...E),Promise.all(y).then(()=>{let l=H.length;for(;l-- >0;){const s=H[l];s&&s.parentNode&&s.parentNode.removeChild(s)}return z(d)})}function Y(n,e,t){const r=[],a=[],c=X(n.querySelectorAll(e)),p=c.length;let m=-1;for(;++m<p;){const i=c[m];if(!i.getAttribute(t)||!i[t].startsWith(q))continue;const u=le(i,t);r[r.length]=[i,u],a[a.length]=u}return{entries:r,urls:a}}function $(n){return Y(n,"link[rel=stylesheet]","href")}function j(n){return Y(n,"script[src]","src")}function le(n,e){return""+new URL(n.getAttribute(e),location.href)}function z(n){const e=o.seriesCallbacks.length;let t=-1,r=Promise.resolve();for(;++t<e;){const c=o.seriesCallbacks[t];r=r.then(()=>c())}const a=[r];for(t=o.parallelCallbacks.length;t-- >0;)a[a.length]=o.parallelCallbacks[t]();return o.seriesCallbacks=[],o.parallelCallbacks=[],Promise.all(a).then(()=>re(n)).catch(se)}function re(n){document.documentElement.style.visibility="inherit";try{ae(new P(n))}catch(e){console.warn(e)}return n}function se(n){console.warn(n),T.development||location.reload()}function ae(n){A=!0;const e=S[w],t=[...o.readyCallbacks.splice(0,o.readyCallbacks.length),...o.loadCallbacks,...e.enterCallbacks],r=t.length;let a=-1;for(;++a<r;)t[a](n)}addEventListener("click",function(e){let t=e.target;switch(t.tagName){case"BODY":return!1;case"A":break;default:if(t._singularAnchor===!1)return!0;const c=t.closest("a");if(!c||!c.href)return t._singularAnchor=!1,!0;t=c}const{href:r}=t,a=t.getAttribute("href");return t.target||t.download||!r.startsWith(q)||a&&a.startsWith("#")?(t._singularAnchor=!1,!0):(t._singularAnchor=t,e.stopPropagation(),e.preventDefault(),route(r,t.dataset?.outlet||void 0),!1)}),addEventListener("popstate",function(e){const{state:t}=e;return t&&t.singular&&U(t.singular.href,void 0,!1).then(),!0}),addEventListener("DOMContentLoaded",function(){M[L].html=document.documentElement.outerHTML,L=G(f),w=_(f),f!==L&&(M[L]=M[f],delete M[f]),f!==w&&(S[w]=S[f],delete S[f]),z([document.documentElement]).then()});
