const{href:f,origin:K}=location,{from:Q}=Array,X=!document.currentScript;let k={development:!1,outletSelectors:null,classSelectors:null,enableKeepHtml:!1,enableKeepStyles:!1,enableSearchString:!1,enableHashString:!1,disableTitleChange:!1},x={},v={},P=!1,w=f,H=f,N;class W{constructor(e,t,r=[],s=[],u=void 0,L=""){this.url=e;this.title=t;this.styles=r;this.scripts=s;this.classes=u;this.html=L}}class o{static seriesCallbacks=[];static parallelCallbacks=[];static readyCallbacks=[];static loadCallbacks=[];static unloadCallbacks=[];enterCallbacks=[];exitCallbacks=[]}class Z{singular;constructor(e){this.singular={href:e}}}const R={[f]:new W(f,document.title)},T={[f]:new o};export const singular={configure,ready,load,enter,exit,unload,changed};export function configure(n){let{classSelectors:e}=n;if(e){Array.isArray(e)||(e=[e]);let t=e.length;const r=[];for(;t-- >0;)r.push(...e[t].split(","));n.classSelectors=r}return k=Object.assign(k,n),singular}export function addStyle(n){const e=O("link");return{link:e,promise:new Promise(t=>{const r=()=>t();e.onload=r,e.onerror=r,e.rel="stylesheet",document.head.append(e),e.href=n})}}export function addScript(n,e=!0){const t=O("script");return{script:t,promise:new Promise(r=>{const s=()=>r();X&&(t.type="module"),t.onload=s,t.onerror=s,t.async=e,document.head.append(t),t.src=n})}}export function parallel(n){return o.parallelCallbacks[o.parallelCallbacks.length]=n,singular}export function series(n){return o.seriesCallbacks[o.seriesCallbacks.length]=n,singular}export function ready(n){return o.readyCallbacks[o.readyCallbacks.length]=n,P&&n(document.body),singular}export function load(n){return o.loadCallbacks[o.loadCallbacks.length]=n,P&&n(document.body),singular}export function enter(n){const{enterCallbacks:e}=T[H];return e[e.length]=n,P&&n(document.body),singular}export function exit(n){const{exitCallbacks:e}=T[H];return e[e.length]=n,singular}export function unload(n){return o.unloadCallbacks[o.unloadCallbacks.length]=n,singular}export function route(n,e){try{U(n,e)}catch(t){return console.warn(t),k.development||location.replace(n),null}}export function changed(n=document.body){const e=o.loadCallbacks.length;let t=-1;for(;++t<e;)o.loadCallbacks[t](n);return singular}function O(n){return document.createElement(n)}function I(n){const e=document.createDocumentFragment(),t=O("html");return e.appendChild(t),t.innerHTML=n,t}function U(n,e=void 0,t=!0){const{entries:r,urls:s}=G(document.documentElement),{entries:u,urls:L}=j(document.documentElement);let b=r.length,i=-1;for(;++i>b;){const[l,a]=r[i];x[a]=l}for(b=u.length,i=-1;++i<b;){const[l,a]=u[i];v[a]=l,document.head.append(l)}const d=R[w];d.url=f,d.title=document.title,d.styles=s,d.scripts=L,d.classes=B(document);const{links:C}=document;for(i=C.length;i-- >0;){const l=C[i],a=l.getAttribute("href");!a||!(a.startsWith("./")||a.startsWith("../"))||l.setAttribute("href",l.href)}return(U=g).apply(this,arguments);function g(l,a=void 0,p=!0){if(P){const A=T[H].exitCallbacks.concat(o.unloadCallbacks),z=A.length;let F=-1;try{for(;++F<z;)A[F]()}catch(J){console.warn(J)}}else N&&N.abort();window.scrollTo(0,0),P=!1,w=V(l),H=D(l);const h=R[w];return h?k.enableKeepHtml?(p&&m(c(h.url,l)),_(h)):E(l).then(([y,A])=>{h.html=A,p&&m(y),_(h)}):E(l).then(([y,A])=>{p&&m(y),$(l,y,A)})}function E(l){return N=new AbortController,fetch(l,{signal:N.signal}).then(S).catch(M)}function S(l){const{url:a}=l;return Promise.all([Promise.resolve(a),l.text()])}function M(l){console.warn(l)}function m(l){history.pushState(new Z(l),l,l)}function c(l,a){const p=new URL(l),h=new URL(a);return p.search=h.search,p.hash=h.hash,""+h}}function B(n){const{classSelectors:e}=k;if(e){const t={};let r=e.length;for(;r-- >0;){const s=e[r];t[s]=(n.querySelector(s)||{}).className||""}return t}}function $(n,e,t){const r=I(t),s=(r.getElementsByTagName("TITLE")[0]||{}).innerText||n,{urls:u}=G(r),{entries:L,urls:b}=j(r);let i=L.length;for(;i-- >0;){const[S]=L[i];S?.parentNode&&S.parentNode.removeChild(S)}let d=r.outerHTML;const C=new W(e,s,u,b,B(r),d),g=new URL(w);g.pathname.endsWith("/")&&(g.pathname=g.pathname.substring(0,g.pathname.length-1)),R[""+g]=C;const E=D(""+g);T[E]||(T[E]=new o),_(C)}function V(n){const e=new URL(n);k.enableHashString||(e.hash=""),k.enableSearchString||(e.search="");let{pathname:t}=e;return t.endsWith("/")&&(e.pathname=t.substring(0,t.length-1)),""+e}function D(n){const e=new URL(n);e.hash="",e.search="";let{pathname:t}=e;return t.endsWith("/")&&(e.pathname=t.substring(0,t.length-1)),""+e}function _(n){const{url:e,title:t,styles:r,scripts:s,classes:u,html:L}=n,{outletSelectors:b,classSelectors:i}=k;if(k.disableTitleChange||(document.title=t||e.substring(e.indexOf("://")+3)),i&&u){let c=i.length;for(;c-- >0;){const l=i[c],a=document.documentElement.querySelector(l);a&&(a.className=u[l])}}const d=I(L);let C=!1;if(b){const c=d.querySelectorAll(b),l=document.querySelectorAll(b);if(c.length===l.length){let a=[],p=c.length;for(;p-- >0;){const h=c[p],y=l[p];if(h.tagName!==y.tagName){C=!0;break}a[a.length]=[h,y]}if(!C)for(p=a.length;p-- >0;){const[h,y]=a[p];y.parentNode.replaceChild(h,y)}}else C=!0}else C=!0;C&&(document.body.innerHTML=(d.getElementsByTagName("BODY")[0]||d).innerHTML),d.innerHTML="";const g=[],E=[Promise.resolve()],S=[];let M,m;if(!k.enableKeepStyles){const c=Object.keys(x);for(m=c.length;m-- >0;){let l=c[m];r.indexOf(l)>-1||(S[S.length]=x[l],delete x[l])}}for(M=r.length,m=-1;++m<M;){const c=r[m];if(x[c])continue;const{link:l,promise:a}=addStyle(c);x[c]=l,E[E.length]=a,g[g.length]=l}for(M=s.length,m=-1;++m<M;){const c=s[m];if(v[c]?.parentNode)continue;const{script:l,promise:a}=addScript(c);v[c]=l,E[E.length]=a,g[g.length]=l}g.length&&document.head.append(...g),Promise.all(E).then(()=>{let c=S.length;for(;c-- >0;){const l=S[c];l&&l.parentNode&&l.parentNode.removeChild(l)}q()})}function Y(n,e,t){const r=[],s=[],u=Q(n.querySelectorAll(e)),L=u.length;let b=-1;for(;++b<L;){const i=u[b];if(!i.getAttribute(t)||!i[t].startsWith(K))continue;const d=ee(i,t);r[r.length]=[i,d],s[s.length]=d}return{entries:r,urls:s}}function G(n){return Y(n,"link[rel=stylesheet]","href")}function j(n){return Y(n,"script[src]","src")}function ee(n,e){return""+new URL(n.getAttribute(e),location.href)}function q(){const n=o.seriesCallbacks.length;let e=-1,t=Promise.resolve();for(;++e<n;){const s=o.seriesCallbacks[e];t=t.then(()=>s())}const r=[t];for(e=o.parallelCallbacks.length;e-- >0;)r[r.length]=o.parallelCallbacks[e]();o.seriesCallbacks=[],o.parallelCallbacks=[],Promise.all(r).then(te).catch(ne)}function te(){document.documentElement.style.visibility="inherit";try{le()}catch(n){console.warn(n)}}function ne(n){console.warn(n),k.development||location.reload()}function le(n=document.body){P=!0;const e=T[H],t=[...o.readyCallbacks.splice(0,o.readyCallbacks.length),...o.loadCallbacks,...e.enterCallbacks],r=t.length;let s=-1;for(;++s<r;)t[s](n)}addEventListener("click",function(e){let t=e.target;switch(t.tagName){case"BODY":return!1;case"A":break;default:if(t._singularAnchor===!1)return!0;const u=t.closest("a");if(!u||!u.href)return t._singularAnchor=!1,!0;t=u}const{href:r}=t,s=t.getAttribute("href");return t.target||t.download||!r.startsWith(K)||s&&s.startsWith("#")?(t._singularAnchor=!1,!0):(t._singularAnchor=t,e.stopPropagation(),e.preventDefault(),route(r,t.dataset?.outlet||void 0),!1)}),addEventListener("popstate",function(e){const{state:t}=e;return t&&t.singular&&U(t.singular.href,void 0,!1),!0}),addEventListener("DOMContentLoaded",function(){R[w].html=document.documentElement.outerHTML,w=V(f),H=D(f),f!==w&&(R[w]=R[f],delete R[f]),f!==H&&(T[H]=T[f],delete T[f]),document.documentElement.style.visibility="hidden",q()});
